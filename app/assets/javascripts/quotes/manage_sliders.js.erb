
window.relationships = ['employee', 'spouse', 'domestic_partner', 'child_under_26']
function set_benefits () {
    $('#pct_employee').bootstrapSlider('setValue',window.relationship_benefits['employee']);
    $('#pct_spouse').bootstrapSlider('setValue', window.relationship_benefits['spouse']);
    $('#pct_domestic_partner').bootstrapSlider('setValue', window.relationship_benefits['domestic_partner']);
    $('#pct_child_under_26').bootstrapSlider('setValue', window.relationship_benefits['child_under_26']);
    $('#dental_pct_employee').bootstrapSlider('setValue',window.relationship_benefits['employee']);
    $('#dental_pct_spouse').bootstrapSlider('setValue', window.relationship_benefits['spouse']);
    $('#dental_pct_domestic_partner').bootstrapSlider('setValue', window.relationship_benefits['domestic_partner']);
    $('#dental_pct_child_under_26').bootstrapSlider('setValue', window.relationship_benefits['child_under_26']);
}


function set_relationship_pct(relationship, val) {
  window.relationship_benefits[relationship] = val
  $("[name~='" + relationship + "']").val(val)
  $.ajax({
    type: 'POST',
    data: {benefits: window.relationship_benefits, id: $('#quote option:selected').val() },
    url: '/broker_agencies/quotes/update_benefits.js',
  })
  set_plan_costs()
  console.log('here')
}

function slider_listeners () {
    $('#ex1').bootstrapSlider({});
    $('#ex2').bootstrapSlider({});
    $('#total_plan_cost').bootstrapSlider({});
    $('#pct_employee').bootstrapSlider({});
    $('#pct_spouse').bootstrapSlider({});
    $('#pct_domestic_partner').bootstrapSlider({});
    $('#pct_child_under_26').bootstrapSlider({});
    $('#dental_pct_employee').bootstrapSlider({});
    $('#dental_pct_spouse').bootstrapSlider({});
    $('#dental_pct_domestic_partner').bootstrapSlider({});
    $('#dental_pct_child_under_26').bootstrapSlider({});
    $('#dental_pctemployees_on_roster').bootstrapSlider({});
    $('#ex1').on('slideStop', function(){deductible_value = this.value;
      toggle_plans([]);
      reset_selected_plans();
    })
    $('#ex2').on('slideStop', function(){deductible_value = this.value;
      toggle_plans([]);
      reset_selected_plans();
    })
    $('#pct_employee').on('slideStop', function() {
        val =$('#pct_employee').bootstrapSlider('getValue')
        set_relationship_pct('employee', val)
       })
    $('#pct_spouse').on('slideStop', function() {
          val =$('#pct_spouse').bootstrapSlider('getValue')
          set_relationship_pct('spouse', val)
         })
    $('#pct_domestic_partner').on('slideStop', function() {
          val =$('#pct_domestic_partner').bootstrapSlider('getValue')
          set_relationship_pct('domestic_partner', val)
         })
    $('#pct_child_under_26').on('slideStop', function() {
          val =$('#pct_child_under_26').bootstrapSlider('getValue')
          set_relationship_pct('child_under_26', val)
         })
    $('#pct_employee').on('slideStop', function() {
       val =$('#pct_employee').bootstrapSlider('getValue')
       set_relationship_pct('employee', val)
      })
     $('#pct_spouse').on('slideStop', function() {
           val =$('#pct_spouse').bootstrapSlider('getValue')
           set_relationship_pct('spouse', val)
          })
     $('#pct_domestic_partner').on('slideStop', function() {
           val =$('#pct_domestic_partner').bootstrapSlider('getValue')
           set_relationship_pct('domestic_partner', val)
          })
     $('#pct_child_under_26').on('slideStop', function() {
           val =$('#pct_child_under_26').bootstrapSlider('getValue')
           set_relationship_pct('child_under_26', val)
          })
    $('#employees_on_roster').on('slideStop', function(){
       $('#employee_count').val($('#employees_on_roster').bootstrapSlider('getValue'))
    })

  set_benefits()

}