var Freebies = ( function( window, undefined ) {

	function allFreebies() {
		  // apply floatlabels
			$('input.floatlabel').floatlabel({
			  slideInput: false
			});
		  // apply selectric
		  $("select[multiple!='multiple']").selectric();
			// apply popover
			$("[data-toggle=popover]").popover();
			// apply tooltips
			$('[data-toggle="tooltip"]').tooltip();
			// apply datePicker
			applyJQDatePickers();
			// toggle hint value and text-align
			$(document).on('click', '.hints-switch', function() {
				var navbar_helpful_hints_text = $('.navbar .hints-switch').html();
				var modal_helpful_hints_text = $('.modal .hints-switch').html();
				$.ajax({
					context: this,
					type: "post",
					url: "/show_hints",
					dataType: 'script',
					beforeSend: function() {
						$(this).html('<i class="fa fa-spinner fa-spin fa-lg fa-fw"></i>');
				  }
				}).done(function (data) {
					if ( $(this).closest('.modal').length ) {
						$(this).fadeTo(400, 0, function() {
							$(this).html('<i class="fa">You will no longer see hints</i>');
							$(this).css({opacity: 1});
							var hint_switch = $('.hint-switch');
							hint_switch.closest('.hint-switch').tooltip('hide')
							.attr('data-original-title', 'Helpful Hints: Off')
							.tooltip('fixTitle')
						})
					} else {
						$(this).fadeTo(400, 0, function() {
							$(this).html(navbar_helpful_hints_text);
							$(this).css({opacity: 1});

						})
					}
					var hint_switch = $(this).closest('.hint-switch');
					if ( hint_switch.attr('data-original-title') == 'Helpful Hints: Off' ) {
						hint_switch.closest('.hint-switch').tooltip('hide')
	          .attr('data-original-title', 'Helpful Hints: On')
	          .tooltip('fixTitle')
					} else {
						hint_switch.closest('.hint-switch').tooltip('hide')
	          .attr('data-original-title', 'Helpful Hints: Off')
	          .tooltip('fixTitle')
					}
				});
			});
  }

	function datePicker() {
		// apply datepicker
		applyJQDatePickers();
	};

	function tooltip() {
		// apply tooltips
		$('[data-toggle="tooltip"]').tooltip();
	}

	function popover() {
		// apply tooltips
		$("[data-toggle=popover]").popover();
	}

	function floatLabels() {
		  // apply floatlabels
			$('input.floatlabel').floatlabel({
			  slideInput: false
			});
  }

	function selectric() {
		// apply selectric
		$("select[multiple!='multiple']").selectric();
	}

	function hints() {
		// toggle hint value and text-align
		$(document).on('click', '.hints-switch', function() {

			$.ajax({
				context: this,
				type: "post",
				url: "/show_hints",
				dataType: 'script',
				beforeSend: function() {
					$(this).html('<i class="fa fa-spinner fa-spin fa-lg fa-fw"></i>');
			  }
			}).done(function (data) {
    		$(this).fadeTo(400, 0, function() {
					$(this).html('<i class="fa">You will no longer see hints</i>');
					$(this).css({opacity: 1});
				})
			});
		});
	}

	// disabled enter key submitting disabeld forms in firefox -- add this to any element in the page onKeyPress="return disableEnterKey(event)"
	function disableEnterKey(e) {
		var key;
		if (window.event) {
			key = window.event.keyCode;     //IE
		} else {
			key = e.which;     //firefox
		}
		if (key == 13) {
			return false;
		} else {
			return true;
		}
	}

	return {
	    allFreebies : allFreebies,
			floatlabels : floatLabels,
			selectric : selectric,
			disableEnterKey : disableEnterKey,
			popover : popover,
			tooltip : tooltip,
			hints : hints
	  };

} )( window );
